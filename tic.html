<!DOCTYPE html>
<html lang="ne">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>NTC AI рд╕рд╛рдереА</title>

<!-- Nepali Font -->
<link href="https://fonts.googleapis.com/css2?family=Mukta:wght@300;400;600;700&display=swap" rel="stylesheet" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet" />

<style>
  :root{
    --brand: #2e7d32;
    --brand-light: #e8f5e9;
    --bg: #f0f2f5;
    --chat-bg: #ffffff;
    --user-msg: #2e7d32;
    --bot-msg: #f1f0f0;
    --text: #1a1a1a;
    --gray: #666;
  }

  body {
    margin: 0;
    font-family: 'Mukta', sans-serif;
    background: var(--bg);
    color: var(--text);
    height: 100dvh; /* Dynamic viewport height */
    display: flex;
    flex-direction: column;
  }

  /* Header */
  .header {
    background: var(--brand);
    color: white;
    padding: 12px 16px;
    display: flex;
    align-items: center;
    gap: 12px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    z-index: 10;
  }
  .bot-avatar {
    width: 40px; height: 40px;
    background: white;
    color: var(--brand);
    border-radius: 50%;
    display: grid;
    place-items: center;
    font-size: 20px;
  }
  .header-info h1 { margin: 0; font-size: 18px; font-weight: 700; }
  .header-info p { margin: 0; font-size: 12px; opacity: 0.9; }
.reset-btn {
    background: rgba(255,255,255,0.2);
    border: none;
    color: white;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    cursor: pointer;
    margin-right: auto;
}

  /* Chat Area */
  .chat-container {
    flex: 1;
    overflow-y: auto;
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 12px;
    scroll-behavior: smooth;
  }

  .message {
    max-width: 85%;
    padding: 10px 14px;
    border-radius: 16px;
    font-size: 15px;
    line-height: 1.5;
    position: relative;
    animation: popIn 0.3s ease;
    word-wrap: break-word;
  }
  @keyframes popIn { from{opacity:0; transform:scale(0.9);} to{opacity:1; transform:scale(1);} }

  .bot {
    align-self: flex-start;
    background: var(--bot-msg);
    color: #000;
    border-bottom-left-radius: 4px;
  }
  
  .user {
    align-self: flex-end;
    background: var(--user-msg);
    color: white;
    border-bottom-right-radius: 4px;
  }

  /* Interactive Cards inside Chat */
  .action-card {
    background: white;
    border: 1px solid #ddd;
    border-radius: 12px;
    padding: 12px;
    margin-top: 6px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
  }
  .card-title { font-weight: 700; margin-bottom: 4px; display:block; font-size: 14px; color: var(--brand); }
  .card-desc { font-size: 12px; color: var(--gray); margin-bottom: 8px; display:block; }
  .card-btn {
    background: var(--brand);
    color: white;
    border: none;
    padding: 8px 12px;
    border-radius: 8px;
    width: 100%;
    font-family: 'Mukta', sans-serif;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
  }
  .card-btn:active { opacity: 0.8; }
  .bot ul { padding-left: 20px; margin: 8px 0 0; }
  .bot li { margin-bottom: 5px; }

  /* Input Area */
  .input-area {
    background: white;
    padding: 10px;
    border-top: 1px solid #ddd;
  }
  .chips {
    display: flex;
    gap: 8px;
    overflow-x: auto;
    padding-bottom: 8px;
    margin-bottom: 4px;
    scrollbar-width: none; /* For Firefox */
  }
  .chips::-webkit-scrollbar { display: none; } /* For Chrome, Safari */
  
  .chip {
    background: var(--brand-light);
    color: var(--brand);
    border: 1px solid var(--brand);
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 13px;
    white-space: nowrap;
    cursor: pointer;
  }
  
  .input-row { display: flex; gap: 8px; }
  .chat-input {
    flex: 1;
    padding: 12px;
    border-radius: 24px;
    border: 1px solid #ccc;
    font-family: 'Mukta', sans-serif;
    font-size: 16px;
    outline: none;
  }
  .chat-input:focus { border-color: var(--brand); }
  .send-btn {
    background: var(--brand);
    color: white;
    border: none;
    width: 46px; height: 46px;
    border-radius: 50%;
    cursor: pointer;
    display: grid;
    place-items: center;
    font-size: 18px;
  }

  /* Typing Indicator */
  .typing { font-size: 12px; color: var(--gray); margin-left: 10px; display: none; }
  .typing.show { display: block; margin-bottom: 10px; }

</style>
</head>
<body>

  <!-- Header -->
  <div class="header">
    <div class="bot-avatar"><i class="fa-solid fa-robot"></i></div>
    <div class="header-info">
      <h1>NTC AI рд╕рд╛рдереА</h1>
      <p>рд╕рдзреИрдВ рдЕрдирд▓рд╛рдЗрди</p>
    </div>
    <button class="reset-btn" onclick="location.reload()" title="Reset Chat"><i class="fa-solid fa-rotate-right"></i></button>
  </div>

  <!-- Chat Area -->
  <div class="chat-container" id="chatBox">
    <div class="typing" id="typingIndicator">NTC рд╕рд╛рдереА рдЯрд╛рдЗрдк рдЧрд░реНрджреИрдЫ...</div>
  </div>

  <!-- Input Area -->
  <div class="input-area">
    <!-- Quick Chips -->
    <div class="chips">
      <span class="chip" onclick="handleChip('рдмреНрдпрд╛рд▓реЗрдиреНрд╕ рдЪреЗрдХ')">ЁЯТ░ рдмреНрдпрд╛рд▓реЗрдиреНрд╕</span>
      <span class="chip" onclick="handleChip('рд░рд┐рдЪрд╛рд░реНрдЬ')">ЁЯТ│ рд░рд┐рдЪрд╛рд░реНрдЬ</span>
      <span class="chip" onclick="handleChip('рдбрд╛рдЯрд╛ рдкреНрдпрд╛рдХ')">ЁЯМР рдбрд╛рдЯрд╛ рдкреНрдпрд╛рдХ</span>
      <span class="chip" onclick="handleChip('рднреНрд╡рд╛рдЗрд╕ рдкреНрдпрд╛рдХ')">ЁЯУЮ рднреНрд╡рд╛рдЗрд╕</span>
      <span class="chip" onclick="handleChip('рд╕рд╛рдкрдЯреА')">ЁЯТ╕ рд╕рд╛рдкрдЯреА</span>
      <span class="chip" onclick="handleChip('FNF рд╕реЗрд╡рд╛')">ЁЯСитАНЁЯСйтАНЁЯСзтАНЁЯСж FNF рд╕реЗрд╡рд╛</span>
      <span class="chip" onclick="handleChip('рдореЗрд░реЛ рдирдореНрдмрд░')">ЁЯУ▒ рдореЗрд░реЛ рдирдореНрдмрд░</span>
    </div>

    <div class="input-row">
      <input type="text" id="userInput" class="chat-input" placeholder="рдпрд╣рд╛рдБ рд▓реЗрдЦреНрдиреБрд╣реЛрд╕реН..." autocomplete="off" />
      <button class="send-btn" id="sendBtn"><i class="fa-solid fa-paper-plane"></i></button>
    </div>
  </div>

<script>
  const chatBox = document.getElementById('chatBox');
  const userInput = document.getElementById('userInput');
  const sendBtn = document.getElementById('sendBtn');
  const typingIndicator = document.getElementById('typingIndicator');

  // --- 1. Initial Greeting ---
  window.onload = () => {
    setTimeout(() => {
      addBotMessage("рдирдорд╕реНрддреЗ! ЁЯЩП рдо рддрдкрд╛рдИрдВрдХреЛ NTC AI рд╕рд╛рдереА рд╣реБрдБред");
    }, 500);
    setTimeout(() => {
      addBotMessage("рддрдкрд╛рдИрдВрд▓рд╛рдИ рдмреНрдпрд╛рд▓реЗрдиреНрд╕, рд░рд┐рдЪрд╛рд░реНрдЬ, рдбрд╛рдЯрд╛ рдкреНрдпрд╛рдХ, рд╡рд╛ рдЕрдиреНрдп NTC рд╕реЗрд╡рд╛рд╣рд░реВрдХреЛ рдмрд╛рд░реЗрдорд╛ рдЬрд╛рдирдХрд╛рд░реА рдЪрд╛рд╣рд┐рдПрдХреЛ рдЫ? 'help' рдЯрд╛рдЗрдк рдЧрд░реЗрд░ рдердк рдЬрд╛рдиреНрдиреБрд╣реЛрд╕реНред");
    }, 1200);
  };

  // --- 2. Chat UI Logic ---
  function addBotMessage(text, isHtml = false) {
    const div = document.createElement('div');
    div.className = 'message bot';
    if(isHtml) div.innerHTML = text;
    else div.textContent = text;
    chatBox.insertBefore(div, typingIndicator);
    scrollToBottom();
  }

  function addUserMessage(text) {
    const div = document.createElement('div');
    div.className = 'message user';
    div.textContent = text;
    chatBox.insertBefore(div, typingIndicator);
    scrollToBottom();
  }

  function scrollToBottom() {
    chatBox.scrollTop = chatBox.scrollHeight;
  }

  function showTyping(show) {
    typingIndicator.className = show ? 'typing show' : 'typing';
    if(show) scrollToBottom();
  }

  // --- 3. ENHANCED AI Response Logic ---
  function processInput(text) {
    const t = text.toLowerCase().trim();
    if(!t) return;

    showTyping(true);

    setTimeout(() => {
      showTyping(false);
      const keywords = (arr) => arr.some(kw => t.includes(kw));

      // --- Identity & Creator ---
      if (keywords(['who are you', 'timi ko', 'рдирд╛рдо рдХреЗ рд╣реЛ', 'david', 'creator'])) {
        addBotMessage("рдо NTC Helper AI рд╣реБрдБ, NTC рд╕реЗрд╡рд╛рд╣рд░реВрд▓рд╛рдИ рд╕рдЬрд┐рд▓реЛ рдмрдирд╛рдЙрдирдХреЛ рд▓рд╛рдЧрд┐ David рджреНрд╡рд╛рд░рд╛ рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░рд┐рдПрдХреЛ рд╣реБрдБред");
      }
      else if (keywords(['I am good', 'ma thik chu', 'рдо рдЖрд░рд╛рдо рдЫреБ', 'i am fine', 'I am well'])) {
        addBotMessage("рддреНрдпреЛ рд░рд╛рдореНрд░реЛ рдЫ, рдЕрдм рднрдиреНрдиреБрд╣реЛрд╕реН рдо рддрдкрд╛рдИрдВрд▓рд╛рдИ рдХреЗ рдорджреНрджрдд рдЧрд░реНрди рд╕рдХреНрдЫреБ?");
      }
      else if (keywords(['susil', 'susila', 'рд╕реБрд╕рд┐рд▓', 'dog', 'animal'])) {
        addBotMessage("Hey Susil Dog! This AI was built by David.Here is nothing in one ruppess.");
      setTimeout(() => {
      addBotMessage("Sorry sorry,just kidding.");
    }, 2500);
      }
      // --- Help Command ---
      else if (keywords(['help', 'рдорджрдд', 'commands'])) {
        addBotMessage(`рдо рдирд┐рдореНрди рдХреБрд░рд╛рд╣рд░реВрдорд╛ рдорджреНрджрдд рдЧрд░реНрди рд╕рдХреНрдЫреБ:
          <ul>
            <li><b>рдмреНрдпрд╛рд▓реЗрдиреНрд╕:</b> Main рд░ Pack рдмреНрдпрд╛рд▓реЗрдиреНрд╕ рдЬрд╛рдБрдЪ</li>
            <li><b>рд░рд┐рдЪрд╛рд░реНрдЬ:</b> резрем-рдЕрдВрдХрдХреЛ рдкрд┐рди рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░</li>
            <li><b>рдбрд╛рдЯрд╛/рднреНрд╡рд╛рдЗрд╕ рдкреНрдпрд╛рдХ:</b> рд▓реЛрдХрдкреНрд░рд┐рдп рдкреНрдпрд╛рдХрд╣рд░реВ рд╣реЗрд░реНрди</li>
            <li><b>рд╕рд╛рдкрдЯреА:</b> рдирдорд╕реНрддреЗ рд╕рд╛рдкрдЯреА рд╕реЗрд╡рд╛ рд▓рд┐рди</li>
            <li><b>FNF:</b> Friends & Family рд╕реЗрд╡рд╛</li>
            <li><b>4G:</b> 4G рдПрдХреНрдЯрд┐рднреЗрдЯ рдЧрд░реНрди</li>
            <li><b>рдореЗрд░реЛ рдирдореНрдмрд░:</b> рдЖрдлреНрдиреЛ рдирдореНрдмрд░ рд╣реЗрд░реНрди</li>
          </ul>`, true);
      }
      // --- Balance Inquiry ---
      else if (keywords(['рдмреНрдпрд╛рд▓реЗрдиреНрд╕', 'balance', 'рдкреИрд╕рд╛', 'bal', 'blc'])) {
        addBotMessage("рддрдкрд╛рдИрдВ рдХреБрди рдмреНрдпрд╛рд▓реЗрдиреНрд╕ рдЬрд╛рдБрдЪ рдЧрд░реНрди рдЪрд╛рд╣рдиреБрд╣реБрдиреНрдЫ?");
        addCard("Main Balance", "рдореБрдЦреНрдп рдмреНрдпрд╛рд▓реЗрдиреНрд╕рдХреЛ рд▓рд╛рдЧрд┐ (*400#)", "*400%23");
        addCard("Pack Balance", "рдмрд╛рдБрдХреА рдбрд╛рдЯрд╛/рднреНрд╡рд╛рдЗрд╕ рдкреНрдпрд╛рдХ (*1415*55#)", "*1415*55%23");
      }
      // --- Recharge Logic ---
      else if (keywords(['рд░рд┐рдЪрд╛рд░реНрдЬ', 'recharge', 'pin', 'rc', 'topup']) || t.match(/\d{16}/)) {
        const pinMatch = t.match(/\d{16}/);
        if (pinMatch) {
          const pin = pinMatch[0];
          addBotMessage(`рдореИрд▓реЗ рдкрд┐рди ${pin} рдкреНрд░рд╛рдкреНрдд рдЧрд░реЗрдВред рд░рд┐рдЪрд╛рд░реНрдЬ рдЧрд░реНрди рддрд▓ рдерд┐рдЪреНрдиреБрд╣реЛрд╕реН:`);
          addCard("рд░рд┐рдЪрд╛рд░реНрдЬ рдЧрд░реНрдиреБрд╣реЛрд╕реН", `рдкрд┐рди: ${pin}`, `*412*${pin}%23`);
        } else {
          addBotMessage("рд░рд┐рдЪрд╛рд░реНрдЬ рдЧрд░реНрдирдХреЛ рд▓рд╛рдЧрд┐ рдХреГрдкрдпрд╛ резрем рдЕрдВрдХрдХреЛ рдкрд┐рди рдХреЛрдб рдпрд╣рд╛рдБ рд▓реЗрдЦреНрдиреБрд╣реЛрд╕реН (рдЙрджрд╛рд╣рд░рдг: recharge 1234...)");
        }
      }
      // --- Check Own Number ---
      else if (keywords(['рдирдореНрдмрд░', 'number', 'mero', 'my number'])) {
        addBotMessage("рддрдкрд╛рдИрдВрдХреЛ рдЖрдлреНрдиреИ рдореЛрдмрд╛рдЗрд▓ рдирдореНрдмрд░ рд╣реЗрд░реНрди:");
        addCard("рдореЗрд░реЛ рдирдореНрдмрд░ рдЪреЗрдХ", "рдбрд╛рдпрд▓ *9#", "*9%23");
      }
      // --- Data Packs ---
      else if (keywords(['рдбрд╛рдЯрд╛', 'data', 'рдиреЗрдЯ', 'internet'])) {
        addBotMessage("рдпрд╣рд╛рдБ рдХреЗрд╣реА рд▓реЛрдХрдкреНрд░рд┐рдп рдбрд╛рдЯрд╛ рдкреНрдпрд╛рдХрд╣рд░реВ рдЫрдиреН:");
        addCard("1GB Data (1 Day)", "Rs. 20 рдорд╛ рез рджрд┐рдирдХреЛ рд▓рд╛рдЧрд┐", "*1415*1*1*3%23");
        addCard("1Mbps Unlimited (24 Hr)", "Rs. 45 рдорд╛ реирек рдШрдгреНрдЯрд╛рдХреЛ рд▓рд╛рдЧрд┐", "*1415*8*3%23");
        addCard("28 Days Pack (599)", "рд╣рд░реЗрдХ рджрд┐рди 1GB + All Net Voice", "*1415*1*4%23");
      }
       // --- Daily Data Packs ---
      else if (keywords(['рджреИрдирд┐рдХ рдбрд╛рдЯрд╛', 'daily data', '24 hrs', 'daily use data'])) {
        addBotMessage("рдпрд╣рд╛рдБ рд╣рд╛рдореНрд░реЛ рджреИрдирд┐рдХ реирек рдШрдгреНрдЯрд╛ рдбрд╛рдЯрд╛рдХреЛ рдкреНрдпрд╛рдХ рдЫред:");
        addCard("1Mbps Unlimited (24 Hr)", "Rs. 45 рдорд╛ реирек рдШрдгреНрдЯрд╛рдХреЛ рд▓рд╛рдЧрд┐", "*1415*8*3%23");
      }
      // --- Voice Packs ---
      else if (keywords(['рднреНрд╡рд╛рдЗрд╕', 'voice', 'рдХрд▓', 'call'])) {
        addBotMessage("рд╕рд╕реНрддреЛрдорд╛ рдХрд▓ рдЧрд░реНрди рдпреА рдкреНрдпрд╛рдХрд╣рд░реВ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБрд╣реЛрд╕реН:");
        addCard("50 Min All Net (1 Day)", "Rs. 25 рдорд╛ рез рджрд┐рдирдХреЛ рд▓рд╛рдЧрд┐", "*1415*2*1%23");
        addCard("550 Min All Net (28 Days)", "Rs. 265 рдорд╛ реирео рджрд┐рдирдХреЛ рд▓рд╛рдЧрд┐", "*1415*2*3%23");
      }
      // --- Namaste Sapati (Loan) ---
      else if (keywords(['loan', 'рд╕рд╛рдкрдЯреА', 'sapati'])) {
        addBotMessage("рдирдорд╕реНрддреЗ рд╕рд╛рдкрдЯреА рд╕реЗрд╡рд╛ рд▓рд┐рдирдХреЛ рд▓рд╛рдЧрд┐:");
        addCard("рдирдорд╕реНрддреЗ рд╕рд╛рдкрдЯреА", "рдбрд╛рдпрд▓ *1477#", "*1477%23");
      }
      // --- FNF Service ---
      else if (keywords(['fnf', 'friends', 'family'])) {
        addBotMessage("Friends and Family (FNF) рд╕реЗрд╡рд╛рдХреЛ рд▓рд╛рдЧрд┐:");
        addCard("FNF рд╕реЗрд╡рд╛", "рдбрд╛рдпрд▓ *1415*7#", "*1415*7%23");
      }
      // --- 4G Activation ---
      else if (keywords(['4g', 'lte'])) {
        addBotMessage("4G рд╕реЗрд╡рд╛ рд╕реБрдЪрд╛рд░реБ рдЧрд░реНрди:");
        addCard("4G рдПрдХреНрдЯрд┐рднреЗрдЯ", "рдбрд╛рдпрд▓ *444#", "*444%23");
      }
      // --- Greetings ---
      else if (keywords(['рдирдорд╕реНрддреЗ', 'hello', 'hi', 'namaste'])) {
        addBotMessage("рдирдорд╕реНрддреЗ! рдЖрд░рд╛рдо рд╣реБрдиреБрд╣реБрдиреНрдЫ? рдорд▓рд╛рдИ рднрдиреНрдиреБрд╣реЛрд╕реН рдо рдХреЗ рд╕реЗрд╡рд╛ рджрд┐рдЙрдБ?");
      }
      // --- Fallback Message ---
      else {
        addBotMessage("рдорд╛рдл рдЧрд░реНрдиреБрд╣реЛрд▓рд╛, рдореИрд▓реЗ рддрдкрд╛рдИрдВрдХреЛ рдХреБрд░рд╛ рдмреБрдЭрд┐рдиред рдХреГрдкрдпрд╛ 'рдбрд╛рдЯрд╛', 'рдмреНрдпрд╛рд▓реЗрдиреНрд╕', 'рд╕рд╛рдкрдЯреА', рд╡рд╛ 'help' рдЬрд╕реНрддрд╛ рд╢рдмреНрджрд╣рд░реВ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБрд╣реЛрд╕реНредBeacuse this is a first version of ai,which is made by David.");
      }

    }, 800); // Simulate realistic thinking delay
  }

  // --- Helper Function: Add Action Card to Chat ---
  function addCard(title, desc, ussd) {
    const div = document.createElement('div');
    div.className = 'action-card';
    div.innerHTML = `
      <span class="card-title">${title}</span>
      <span class="card-desc">${desc}</span>
      <button class="card-btn" onclick="window.parent.location.href='tel:${ussd}'">
        <i class="fa-solid fa-phone"></i> рдбрд╛рдпрд▓ рдЧрд░реНрдиреБрд╣реЛрд╕реН
      </button>
    `;
    chatBox.insertBefore(div, typingIndicator);
    scrollToBottom();
  }
  
  // NOTE: Changed onclick to use window.parent.location.href to dial from the main page, not the iframe.

  // --- Event Listeners ---
  function handleSend() {
    const text = userInput.value;
    if(text.trim()) {
      addUserMessage(text);
      processInput(text);
      userInput.value = '';
    }
  }

  function handleChip(text) {
    addUserMessage(text);
    processInput(text);
  }

  sendBtn.addEventListener('click', handleSend);
  userInput.addEventListener('keypress', (e) => {
    if(e.key === 'Enter') handleSend();
  });

</script>
</body>
</html>